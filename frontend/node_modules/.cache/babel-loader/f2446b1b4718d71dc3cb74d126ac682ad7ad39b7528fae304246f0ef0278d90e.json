{"ast":null,"code":"var _jsxFileName = \"D:\\\\GesPerform\\\\frontend\\\\src\\\\Components\\\\ConfirmerPresence.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Logo_one from '../img/timetable.png';\nimport { Link } from 'react-router-dom';\nimport '../CSS/confirmation.css';\nimport Spinner from './Spinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ConfirmerPresence() {\n  _s();\n  let [loading, setLoading] = useState(false);\n  const [userMatricul, setMatricul] = useState(JSON.parse(localStorage.getItem('employee_detail')).num_matricul);\n  const [accMsg, setAccMsg] = useState('Veuillez marquer votre présence');\n  const [err, setErr] = useState(null);\n  const [latitude, setLatitude] = useState(null);\n  const [longitude, setLongitude] = useState(null);\n  const validerPresence = () => {\n    setLoading(true);\n    setAccMsg('Présence marquée');\n    fetch(`https://gesperform.online/public/api/getTimeStamp`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        num_matricul: userMatricul\n      })\n    }).then(response => response.json()).then(data => {\n      setLoading(false);\n      console.log(data);\n      if (data.statut === 'OK') {\n        window.location.replace('./acceuilemployee');\n        setAccMsg('');\n      }\n    });\n  };\n  const verifierLocalisation = distance => {\n    if (distance < 100) {\n      // console.log('ok')\n      //setAccMsg(distance)\n      validerPresence();\n    } else {\n      console.log('come to office');\n      setErr('Rendez vous dans nos bureaux');\n      //setAccMsg('Veuillez vous rendre au bureau !');\n      setAccMsg('');\n    }\n    console.log(distance);\n  };\n  const Calcdistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371000;\n    const x = (lon2 - lon1) * Math.cos((lat1 + lat2) / 2);\n    const y = lat2 - lat1;\n    const d = Math.sqrt(x * x + y * y) * R;\n    return d;\n  };\n  const initiateAll = () => {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(position => {\n        // Obtenir les coordonnées de latitude et longitude\n        const {\n          latitude,\n          longitude\n        } = position.coords;\n        setLatitude(latitude);\n        setLongitude(longitude);\n\n        //console.log(position.coords);\n        verifierLocalisation(Calcdistance(longitude, latitude, /* 6.432124, 2.35092 , */2.46, 6.3519));\n      }, error => {\n        console.log('Erreur de géolocalisation :', error);\n      });\n    } else {\n      console.log('La géolocalisation n\\'est pas disponible dans ce navigateur.');\n    }\n  };\n\n  //autre fonction******************************************************************\n\n  useEffect(() => {\n    setTimeout(() => {\n      setLoading(false);\n    }, 2800);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"contain_confirmation\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contain_header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contain_nav_confirm\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          style: {\n            textDecoration: 'none',\n            color: 'black'\n          },\n          to: \"/acceuilemployee\",\n          className: \"retour\",\n          children: \"Retour\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contain_img_confirm\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Logo_one,\n          className: \"img_confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contain_my_second_part\",\n      children: loading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"\",\n          children: [accMsg, err]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            width: '100%'\n          },\n          children: [\" \", /*#__PURE__*/_jsxDEV(Link, {\n            style: {\n              textDecoration: 'none',\n              color: 'black',\n              width: '70%'\n            },\n            className: \"retour\",\n            to: \"\",\n            onClick: initiateAll,\n            children: \"Valider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 110\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n}\n_s(ConfirmerPresence, \"jPrZbBAIoMkVrys96u4p/ZybhsQ=\");\n_c = ConfirmerPresence;\nvar _c;\n$RefreshReg$(_c, \"ConfirmerPresence\");","map":{"version":3,"names":["React","useEffect","useState","Logo_one","Link","Spinner","jsxDEV","_jsxDEV","ConfirmerPresence","_s","loading","setLoading","userMatricul","setMatricul","JSON","parse","localStorage","getItem","num_matricul","accMsg","setAccMsg","err","setErr","latitude","setLatitude","longitude","setLongitude","validerPresence","fetch","method","headers","body","stringify","then","response","json","data","console","log","statut","window","location","replace","verifierLocalisation","distance","Calcdistance","lat1","lon1","lat2","lon2","R","x","Math","cos","y","d","sqrt","initiateAll","navigator","geolocation","getCurrentPosition","position","coords","error","setTimeout","className","children","style","textDecoration","color","to","fileName","_jsxFileName","lineNumber","columnNumber","src","display","alignItems","justifyContent","width","onClick","_c","$RefreshReg$"],"sources":["D:/GesPerform/frontend/src/Components/ConfirmerPresence.js"],"sourcesContent":["import React , {useEffect, useState} from 'react'\nimport Logo_one from '../img/timetable.png'\nimport { Link } from 'react-router-dom'\nimport '../CSS/confirmation.css'\nimport Spinner from './Spinner'\n\n\n\nexport default function ConfirmerPresence() {\n  let [loading, setLoading] = useState(false);\n  const [userMatricul , setMatricul] = useState(JSON.parse(localStorage.getItem('employee_detail')).num_matricul)\n  const [accMsg , setAccMsg] = useState('Veuillez marquer votre présence')\n\n  const [err , setErr] = useState(null)\n  const [latitude, setLatitude] = useState(null);\n  const [longitude, setLongitude] = useState(null);\n\n  const validerPresence = ()=>{\n    setLoading(true) ; \n    setAccMsg('Présence marquée')\n    fetch(`https://gesperform.online/public/api/getTimeStamp`, {\n      method: 'POST',\n      headers: {\n        'Accept':'application/json',\n        'Content-Type':'application/json'\n      },\n      body:JSON.stringify({\n        num_matricul: userMatricul , \n      }) \n     \n    })\n    .then(response => response.json())\n    .then((data) =>{\n      setLoading(false) ; \n      console.log(data)\n      if(data.statut === 'OK'){\n       \n        window.location.replace('./acceuilemployee')\n        setAccMsg('')\n      }\n    })\n    \n  }\n\n  const verifierLocalisation = (distance)=>{\n    if (distance < 100){\n     // console.log('ok')\n      //setAccMsg(distance)\n      validerPresence();\n    }else{\n      console.log('come to office');\n      setErr('Rendez vous dans nos bureaux')\n      //setAccMsg('Veuillez vous rendre au bureau !');\n      setAccMsg('')\n    }\n   console.log(distance)\n  }\n\n  const Calcdistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371000;\n    const x = (lon2-lon1) * Math.cos((lat1+lat2)/2);\n    const y = (lat2-lat1);\n    const d = Math.sqrt(x*x + y*y) * R;\n    return d;\n  }\n\n\n\n   \n const initiateAll = () => {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          // Obtenir les coordonnées de latitude et longitude\n          const { latitude, longitude } = position.coords;\n          setLatitude(latitude);\n          setLongitude(longitude);\n\n          //console.log(position.coords);\n          verifierLocalisation(Calcdistance( longitude, latitude ,/* 6.432124, 2.35092 , */  2.46, 6.3519));\n  \n        },\n        (error) => {\n          console.log('Erreur de géolocalisation :', error);\n        }\n      );\n\n    } else {\n      console.log('La géolocalisation n\\'est pas disponible dans ce navigateur.');\n    }\n  }\n\n//autre fonction******************************************************************\n  \n  useEffect(()=>{\n   \n    setTimeout(()=>{\n      setLoading(false)\n    } , 2800)\n  }, [])\n\n\n  return (\n    <div className='contain_confirmation'>\n       \n        <div className='contain_header'>\n            <div className='contain_nav_confirm'>\n                \n              <Link style={{textDecoration:'none' , color:'black'}}  to='/acceuilemployee' className='retour' >\n                  Retour\n              </Link>\n        \n            </div>  \n\n            <div className='contain_img_confirm'>\n               <img  src={Logo_one} className='img_confirm'/>\n            </div>  \n        </div>\n\n\n        <div className='contain_my_second_part'>\n          {\n            loading?  \n            <Spinner\n          \n            />\n            :\n            <div className='' >\n                <h4 className=''>\n                  {accMsg}\n                  {err}\n                </h4>\n                <div  style={{display:'flex', alignItems:'center', justifyContent:'center' , width:'100%'}}> <Link  style={{textDecoration:'none' , color:'black' , width:'70%'}} className='retour' to='' onClick={initiateAll}>Valider</Link> </div>\n            </div>\n\n         }\n        </div>\n\n      \n\n    </div>\n  )\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACjD,OAAOC,QAAQ,MAAM,sBAAsB;AAC3C,SAASC,IAAI,QAAQ,kBAAkB;AACvC,OAAO,yBAAyB;AAChC,OAAOC,OAAO,MAAM,WAAW;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAI/B,eAAe,SAASC,iBAAiBA,CAAA,EAAG;EAAAC,EAAA;EAC1C,IAAI,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACU,YAAY,EAAGC,WAAW,CAAC,GAAGX,QAAQ,CAACY,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAACC,YAAY,CAAC;EAC/G,MAAM,CAACC,MAAM,EAAGC,SAAS,CAAC,GAAGlB,QAAQ,CAAC,iCAAiC,CAAC;EAExE,MAAM,CAACmB,GAAG,EAAGC,MAAM,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EACrC,MAAM,CAACqB,QAAQ,EAAEC,WAAW,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACuB,SAAS,EAAEC,YAAY,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;EAEhD,MAAMyB,eAAe,GAAGA,CAAA,KAAI;IAC1BhB,UAAU,CAAC,IAAI,CAAC;IAChBS,SAAS,CAAC,kBAAkB,CAAC;IAC7BQ,KAAK,CAAE,mDAAkD,EAAE;MACzDC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,QAAQ,EAAC,kBAAkB;QAC3B,cAAc,EAAC;MACjB,CAAC;MACDC,IAAI,EAACjB,IAAI,CAACkB,SAAS,CAAC;QAClBd,YAAY,EAAEN;MAChB,CAAC;IAEH,CAAC,CAAC,CACDqB,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACjCF,IAAI,CAAEG,IAAI,IAAI;MACbzB,UAAU,CAAC,KAAK,CAAC;MACjB0B,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;MACjB,IAAGA,IAAI,CAACG,MAAM,KAAK,IAAI,EAAC;QAEtBC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,mBAAmB,CAAC;QAC5CtB,SAAS,CAAC,EAAE,CAAC;MACf;IACF,CAAC,CAAC;EAEJ,CAAC;EAED,MAAMuB,oBAAoB,GAAIC,QAAQ,IAAG;IACvC,IAAIA,QAAQ,GAAG,GAAG,EAAC;MAClB;MACC;MACAjB,eAAe,EAAE;IACnB,CAAC,MAAI;MACHU,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC7BhB,MAAM,CAAC,8BAA8B,CAAC;MACtC;MACAF,SAAS,CAAC,EAAE,CAAC;IACf;IACDiB,OAAO,CAACC,GAAG,CAACM,QAAQ,CAAC;EACtB,CAAC;EAED,MAAMC,YAAY,GAAGA,CAACC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,IAAI,KAAK;IAC/C,MAAMC,CAAC,GAAG,OAAO;IACjB,MAAMC,CAAC,GAAG,CAACF,IAAI,GAACF,IAAI,IAAIK,IAAI,CAACC,GAAG,CAAC,CAACP,IAAI,GAACE,IAAI,IAAE,CAAC,CAAC;IAC/C,MAAMM,CAAC,GAAIN,IAAI,GAACF,IAAK;IACrB,MAAMS,CAAC,GAAGH,IAAI,CAACI,IAAI,CAACL,CAAC,GAACA,CAAC,GAAGG,CAAC,GAACA,CAAC,CAAC,GAAGJ,CAAC;IAClC,OAAOK,CAAC;EACV,CAAC;EAKF,MAAME,WAAW,GAAGA,CAAA,KAAM;IACvB,IAAI,aAAa,IAAIC,SAAS,EAAE;MAC9BA,SAAS,CAACC,WAAW,CAACC,kBAAkB,CACrCC,QAAQ,IAAK;QACZ;QACA,MAAM;UAAEtC,QAAQ;UAAEE;QAAU,CAAC,GAAGoC,QAAQ,CAACC,MAAM;QAC/CtC,WAAW,CAACD,QAAQ,CAAC;QACrBG,YAAY,CAACD,SAAS,CAAC;;QAEvB;QACAkB,oBAAoB,CAACE,YAAY,CAAEpB,SAAS,EAAEF,QAAQ,EAAE,yBAA2B,IAAI,EAAE,MAAM,CAAC,CAAC;MAEnG,CAAC,EACAwC,KAAK,IAAK;QACT1B,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEyB,KAAK,CAAC;MACnD,CAAC,CACF;IAEH,CAAC,MAAM;MACL1B,OAAO,CAACC,GAAG,CAAC,8DAA8D,CAAC;IAC7E;EACF,CAAC;;EAEH;;EAEErC,SAAS,CAAC,MAAI;IAEZ+D,UAAU,CAAC,MAAI;MACbrD,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,EAAG,IAAI,CAAC;EACX,CAAC,EAAE,EAAE,CAAC;EAGN,oBACEJ,OAAA;IAAK0D,SAAS,EAAC,sBAAsB;IAAAC,QAAA,gBAEjC3D,OAAA;MAAK0D,SAAS,EAAC,gBAAgB;MAAAC,QAAA,gBAC3B3D,OAAA;QAAK0D,SAAS,EAAC,qBAAqB;QAAAC,QAAA,eAElC3D,OAAA,CAACH,IAAI;UAAC+D,KAAK,EAAE;YAACC,cAAc,EAAC,MAAM;YAAGC,KAAK,EAAC;UAAO,CAAE;UAAEC,EAAE,EAAC,kBAAkB;UAACL,SAAS,EAAC,QAAQ;UAAAC,QAAA,EAAE;QAEjG;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAO;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAEH,eAENnE,OAAA;QAAK0D,SAAS,EAAC,qBAAqB;QAAAC,QAAA,eACjC3D,OAAA;UAAMoE,GAAG,EAAExE,QAAS;UAAC8D,SAAS,EAAC;QAAa;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAC3C;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACJ,eAGNnE,OAAA;MAAK0D,SAAS,EAAC,wBAAwB;MAAAC,QAAA,EAEnCxD,OAAO,gBACPH,OAAA,CAACF,OAAO;QAAAkE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAEN,gBAEFnE,OAAA;QAAK0D,SAAS,EAAC,EAAE;QAAAC,QAAA,gBACb3D,OAAA;UAAI0D,SAAS,EAAC,EAAE;UAAAC,QAAA,GACb/C,MAAM,EACNE,GAAG;QAAA;UAAAkD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QACD,eACLnE,OAAA;UAAM4D,KAAK,EAAE;YAACS,OAAO,EAAC,MAAM;YAAEC,UAAU,EAAC,QAAQ;YAAEC,cAAc,EAAC,QAAQ;YAAGC,KAAK,EAAC;UAAM,CAAE;UAAAb,QAAA,GAAC,GAAC,eAAA3D,OAAA,CAACH,IAAI;YAAE+D,KAAK,EAAE;cAACC,cAAc,EAAC,MAAM;cAAGC,KAAK,EAAC,OAAO;cAAGU,KAAK,EAAC;YAAK,CAAE;YAACd,SAAS,EAAC,QAAQ;YAACK,EAAE,EAAC,EAAE;YAACU,OAAO,EAAEvB,WAAY;YAAAS,QAAA,EAAC;UAAO;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAO,KAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAM;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IACpO;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAGJ;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAIJ;AAEV;AAACjE,EAAA,CAtIuBD,iBAAiB;AAAAyE,EAAA,GAAjBzE,iBAAiB;AAAA,IAAAyE,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}