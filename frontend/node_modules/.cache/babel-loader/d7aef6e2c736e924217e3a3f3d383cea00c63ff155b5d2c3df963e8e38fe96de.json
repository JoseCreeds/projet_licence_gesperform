{"ast":null,"code":"import _slicedToArray from\"D:/GesPerform/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import Userlog from'../img/user.png';import'../CSS/Login.css';import Logo_one from'../img/buildings.png';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),num_matricul=_useState2[0],setNumMatricule=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var generateRandomToken=function generateRandomToken(){var characters='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';var token='';for(var i=0;i<10;i++){token+=characters.charAt(Math.floor(Math.random()*characters.length));}return token;};var checkEmptyData=function checkEmptyData(){if(password===''||num_matricul===''){setError('Aucun champs vide');}else if(password!==''&&num_matricul!==''){setError('');var token=localStorage.getItem('token');if(!token){localStorage.setItem('token',generateRandomToken());fetch(\"https://gesperform.online/public/api/handletoken\",{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({num_matricul:num_matricul,token:localStorage.getItem('token')})}).then(function(response){return response.json();});}fetch(\"https://gesperform.online/public/api/connectbenincontroluser\",{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({num_matricul:num_matricul,password:password})}).then(function(response){return response.json();}).then(function(data){console.log(data);if(data.statut==='OK'&&data.user[0].type_utilisateur==='employe'){window.location.replace('./acceuilemployee');localStorage.setItem('employee_detail',JSON.stringify(data.user[0]));}else if(data.statut==='OK'&&data.user[0].type_utilisateur==='client'){window.location.replace('./Acceuilclient');localStorage.setItem('client_detail',JSON.stringify(data.user[0]));}else if(data.statut==='OK'&&data.user[0].type_utilisateur==='superviseur'){window.location.replace('./superviseur');localStorage.setItem('client_detail',JSON.stringify(data.user[0]));}else if(data.statut==='OK'&&data.user[0].type_utilisateur==='admin'){window.location.replace('./admindashboard');localStorage.setItem('client_detail',JSON.stringify(data.user[0]));}else if(data.statut==='Bad credentials')setError('Mauvais identifiants');});}};var connectUsers=function connectUsers(){checkEmptyData();};return/*#__PURE__*/_jsxs(\"div\",{className:\"contain_login\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"contain_firstpart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"containlogimg\",children:/*#__PURE__*/_jsx(\"img\",{src:Userlog,className:\"logimg\"})}),/*#__PURE__*/_jsx(\"h4\",{className:\"\",children:\"Bienvenu sur GesPerform, la plateforme pour surveiller les performances de vos employ\\xE9s\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"\",children:\"Se connecter\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contain_secondpart\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"contain_form\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setNumMatricule(e.target.value);},className:\"con_inpone\",type:\"email\",placeholder:\"Veuillez entrer votre num\\xE9ro matricule\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setPassword(e.target.value);},className:\"con_inpone\",type:\"password\",placeholder:\"Veuillez entrer votre mot de passe\"}),/*#__PURE__*/_jsxs(\"h3\",{style:{color:'red'},children:[\"  \",error,\"  \"]}),/*#__PURE__*/_jsx(Link,{onClick:connectUsers,style:{textDecoration:'none'},to:\"\",className:\"connect_me\",children:\"Se connecter\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rester_connecter\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"f_child\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"\",type:\"checkbox\"}),/*#__PURE__*/_jsx(\"p\",{children:\" Rester connect\\xE9  \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"a\",{style:{textDecoration:'none',color:' rgb(212, 166, 14 )'},href:\"#\",children:\" Mot de passe oubli\\xE9  \"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"contain_img\",children:/*#__PURE__*/_jsx(\"img\",{src:Logo_one,className:'logoOne'})})]})]});}","map":{"version":3,"names":["React","useState","Userlog","Logo_one","Link","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","num_matricul","setNumMatricule","_useState3","_useState4","password","setPassword","_useState5","_useState6","error","setError","generateRandomToken","characters","token","i","charAt","Math","floor","random","length","checkEmptyData","localStorage","getItem","setItem","fetch","method","headers","body","JSON","stringify","then","response","json","data","console","log","statut","user","type_utilisateur","window","location","replace","connectUsers","className","children","src","onChange","e","target","value","type","placeholder","style","color","onClick","textDecoration","to","href"],"sources":["D:/GesPerform/frontend/src/Components/Login.js"],"sourcesContent":["import React , {useState} from 'react'\nimport Userlog from '../img/user.png'\nimport '../CSS/Login.css'\nimport Logo_one from '../img/buildings.png'\nimport { Link } from 'react-router-dom'\n\nexport default function Login() {\n\n  const [num_matricul , setNumMatricule] = useState('')\n  const [password , setPassword] = useState('')\n  const [error , setError] = useState('')\n\n  const generateRandomToken = () => {\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let token = '';\n\n    for (let i = 0; i < 10; i++) {\n      token += characters.charAt(Math.floor(Math.random() * characters.length));\n    }\n\n    return token;\n  };\n\n  const checkEmptyData =  ()=>{\n     if(password === '' || num_matricul === ''){\n      setError('Aucun champs vide')\n     } else if(password !== '' && num_matricul !== '') {\n        setError('')\n\n        const token = localStorage.getItem('token')\n\n        if (!token) {\n    \n          localStorage.setItem('token', generateRandomToken());\n\n          fetch(`https://gesperform.online/public/api/handletoken`, {\n          method: 'POST',\n          headers: {\n            'Accept':'application/json',\n            'Content-Type':'application/json'\n          }, \n          body:JSON.stringify({\n            num_matricul: num_matricul, \n            token:localStorage.getItem('token')\n          }) \n         \n        })\n        .then(response => response.json())\n\n        }\n\n        fetch(`https://gesperform.online/public/api/connectbenincontroluser`, {\n          method: 'POST',\n          headers: {\n            'Accept':'application/json',\n            'Content-Type':'application/json'\n          }, \n          body:JSON.stringify({\n            num_matricul: num_matricul, \n            password:password\n          }) \n         \n        })\n        .then(response => response.json())\n        .then((data) =>{\n         console.log(data)\n    \n         if(data.statut === 'OK' && data.user[0].type_utilisateur === 'employe' ){\n          \n           window.location.replace('./acceuilemployee')\n           localStorage.setItem('employee_detail', JSON.stringify( data.user[0]))\n          \n         } else if(data.statut === 'OK' && data.user[0].type_utilisateur === 'client' ) {\n          window.location.replace('./Acceuilclient')\n          localStorage.setItem('client_detail',JSON.stringify( data.user[0]))\n         }else if(data.statut === 'OK' && data.user[0].type_utilisateur === 'superviseur' ) {\n          window.location.replace('./superviseur')\n          localStorage.setItem('client_detail',JSON.stringify( data.user[0]))\n         }else if(data.statut === 'OK' && data.user[0].type_utilisateur === 'admin' ) {\n          window.location.replace('./admindashboard')\n          localStorage.setItem('client_detail',JSON.stringify( data.user[0]))\n         }\n         else if( data.statut === 'Bad credentials')\n          setError('Mauvais identifiants')\n\n         })\n     }\n  }\n\n  \n  const connectUsers = ()=>{\n\n    checkEmptyData();\n\n  \n\n  }\n\n\n\n  return (\n    <div className='contain_login'>\n      \n      <div className='contain_firstpart' >\n         \n          <div className='containlogimg'>\n            <img src={Userlog} className='logimg' /> \n          </div>\n\n          <h4 className=''>\n             Bienvenu sur GesPerform, la plateforme pour surveiller les performances de vos employés\n          </h4>\n\n\n          <h2 className=''>\n             Se connecter  \n          </h2>\n          \n\n      </div>\n\n      <div className='contain_secondpart' >\n        \n       \n       \n        <div className='contain_form' >\n          \n        \n           \n            <input onChange={(e)=>{setNumMatricule(e.target.value)}} className='con_inpone' type='email' placeholder='Veuillez entrer votre numéro matricule'/>\n\n            <input  onChange={(e)=>{setPassword(e.target.value)}} className='con_inpone' type='password' placeholder='Veuillez entrer votre mot de passe'/>\n\n            <h3 style={{color:'red'}}>  {error}  </h3>\n\n            <Link onClick={connectUsers} style={{textDecoration:'none' }}  to='' className='connect_me' >\n              Se connecter\n            </Link>\n\n            <div\n             className='rester_connecter'\n             >\n              <div className='f_child'>\n\n                <input\n                  className=''\n                  type='checkbox'\n                />\n                <p> Rester connecté  </p>\n\n             </div>\n\n              <div className=''>\n\n                <a style={{textDecoration:'none' , color:' rgb(212, 166, 14 )'}} href='#'> Mot de passe oublié  </a>\n                \n             </div>\n\n            </div>\n\n\n        </div>\n\n\n        <div className='contain_img' >\n          <img src={Logo_one} className={'logoOne'}/>\n        </div>\n  \n  \n\n      </div>\n\n\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}