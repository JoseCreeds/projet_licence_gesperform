{"ast":null,"code":"var _jsxFileName = \"D:\\\\GesPerform\\\\frontend\\\\src\\\\Components\\\\ConfirmerPresence.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Logo_one from '../img/timetable.png';\nimport { Link } from 'react-router-dom';\nimport '../CSS/confirmation.css';\nimport Spinner from './Spinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ConfirmerPresence() {\n  _s();\n  let [loading, setLoading] = useState(false);\n  const [userMatricul, setMatricul] = useState(JSON.parse(localStorage.getItem('employee_detail')).num_matricul);\n  const [accMsg, setAccMsg] = useState('Veuillez marquer votre présence');\n  const [err, setErr] = useState(null);\n  const [latitude, setLatitude] = useState(null);\n  const [longitude, setLongitude] = useState(null);\n  const validerPresence = () => {\n    setLoading(true);\n    setAccMsg('Présence marquée');\n    fetch(`https://gesperform.online/public/api/getTimeStamp`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        num_matricul: userMatricul\n      })\n    }).then(response => response.json()).then(data => {\n      setLoading(false);\n      console.log(data);\n      if (data.statut === 'OK') {\n        window.location.replace('./acceuilemployee');\n        setAccMsg('');\n      }\n    });\n  };\n  const verifierLocalisation = distance => {\n    if (distance < 100) {\n      // console.log('ok')\n      validerPresence();\n    } else {\n      console.log('come to office');\n      setErr('Rendez vous dans nos bureaux');\n      //setAccMsg('Veuillez vous rendre au bureau !');\n      setAccMsg('');\n    }\n    console.log(distance);\n  };\n  const Calcdistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371000;\n    const x = (lon2 - lon1) * Math.cos((lat1 + lat2) / 2);\n    const y = lat2 - lat1;\n    const d = Math.sqrt(x * x + y * y) * R;\n    return d;\n  };\n  const initiateAll = () => {\n    setAccMsg('');\n  };\n\n  //autre fonction******************************************************************\n\n  useEffect(() => {\n    setTimeout(() => {\n      setLoading(false);\n    }, 2800);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"contain_confirmation\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contain_header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contain_nav_confirm\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          style: {\n            textDecoration: 'none',\n            color: 'black'\n          },\n          to: \"/acceuilemployee\",\n          className: \"retour\",\n          children: \"Retour\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contain_img_confirm\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Logo_one,\n          className: \"img_confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contain_my_second_part\",\n      children: loading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"\",\n          children: [accMsg, err]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            width: '100%'\n          },\n          children: [\" \", /*#__PURE__*/_jsxDEV(Link, {\n            style: {\n              textDecoration: 'none',\n              color: 'black',\n              width: '50%'\n            },\n            className: \"retour\",\n            to: \"\",\n            onClick: initiateAll,\n            children: \"Valider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 110\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n_s(ConfirmerPresence, \"jPrZbBAIoMkVrys96u4p/ZybhsQ=\");\n_c = ConfirmerPresence;\nvar _c;\n$RefreshReg$(_c, \"ConfirmerPresence\");","map":{"version":3,"names":["React","useEffect","useState","Logo_one","Link","Spinner","jsxDEV","_jsxDEV","ConfirmerPresence","_s","loading","setLoading","userMatricul","setMatricul","JSON","parse","localStorage","getItem","num_matricul","accMsg","setAccMsg","err","setErr","latitude","setLatitude","longitude","setLongitude","validerPresence","fetch","method","headers","body","stringify","then","response","json","data","console","log","statut","window","location","replace","verifierLocalisation","distance","Calcdistance","lat1","lon1","lat2","lon2","R","x","Math","cos","y","d","sqrt","initiateAll","setTimeout","className","children","style","textDecoration","color","to","fileName","_jsxFileName","lineNumber","columnNumber","src","display","alignItems","justifyContent","width","onClick","_c","$RefreshReg$"],"sources":["D:/GesPerform/frontend/src/Components/ConfirmerPresence.js"],"sourcesContent":["import React , {useEffect, useState} from 'react'\nimport Logo_one from '../img/timetable.png'\nimport { Link } from 'react-router-dom'\nimport '../CSS/confirmation.css'\nimport Spinner from './Spinner'\n\n\n\nexport default function ConfirmerPresence() {\n  let [loading, setLoading] = useState(false);\n  const [userMatricul , setMatricul] = useState(JSON.parse(localStorage.getItem('employee_detail')).num_matricul)\n  const [accMsg , setAccMsg] = useState('Veuillez marquer votre présence')\n\n  const [err , setErr] = useState(null)\n  const [latitude, setLatitude] = useState(null);\n  const [longitude, setLongitude] = useState(null);\n\n  const validerPresence = ()=>{\n    setLoading(true) ; \n    setAccMsg('Présence marquée')\n    fetch(`https://gesperform.online/public/api/getTimeStamp`, {\n      method: 'POST',\n      headers: {\n        'Accept':'application/json',\n        'Content-Type':'application/json'\n      },\n      body:JSON.stringify({\n        num_matricul: userMatricul , \n      }) \n     \n    })\n    .then(response => response.json())\n    .then((data) =>{\n      setLoading(false) ; \n      console.log(data)\n      if(data.statut === 'OK'){\n       \n        window.location.replace('./acceuilemployee')\n        setAccMsg('')\n      }\n    })\n    \n  }\n\n  const verifierLocalisation = (distance)=>{\n    if (distance < 100){\n     // console.log('ok')\n      validerPresence();\n    }else{\n      console.log('come to office');\n      setErr('Rendez vous dans nos bureaux')\n      //setAccMsg('Veuillez vous rendre au bureau !');\n      setAccMsg('')\n    }\n   console.log(distance)\n  }\n\n  const Calcdistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371000;\n    const x = (lon2-lon1) * Math.cos((lat1+lat2)/2);\n    const y = (lat2-lat1);\n    const d = Math.sqrt(x*x + y*y) * R;\n    return d;\n  }\n\n\n\n   \n const initiateAll = () => {\n    setAccMsg('')\n  }\n\n//autre fonction******************************************************************\n  \n  useEffect(()=>{\n   \n    setTimeout(()=>{\n      setLoading(false)\n    } , 2800)\n  }, [])\n\n\n  return (\n    <div className='contain_confirmation'>\n       \n        <div className='contain_header'>\n            <div className='contain_nav_confirm'>\n                \n              <Link style={{textDecoration:'none' , color:'black'}}  to='/acceuilemployee' className='retour' >\n                  Retour\n              </Link>\n        \n            </div>  \n\n            <div className='contain_img_confirm'>\n               <img  src={Logo_one} className='img_confirm'/>\n            </div>  \n        </div>\n\n\n        <div className='contain_my_second_part'>\n          {\n            loading?  \n            <Spinner\n          \n            />\n            :\n            <div className='' >\n                <h4 className=''>\n                  {accMsg}\n                  {err}\n                </h4>\n                <div  style={{display:'flex', alignItems:'center', justifyContent:'center' , width:'100%'}}> <Link  style={{textDecoration:'none' , color:'black' , width:'50%'}} className='retour' to='' onClick={initiateAll}>Valider</Link> </div>\n            </div>\n\n         }\n        </div>\n\n      \n\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}