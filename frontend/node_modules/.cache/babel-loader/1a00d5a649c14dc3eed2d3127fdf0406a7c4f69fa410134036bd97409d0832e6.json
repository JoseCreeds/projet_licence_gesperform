{"ast":null,"code":"import _slicedToArray from\"D:/GesPerform/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Logo_one from'../img/timetable.png';import{Link}from'react-router-dom';import'../CSS/confirmation.css';import Spinner from'./Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ConfirmerPresence(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(JSON.parse(localStorage.getItem('employee_detail')).num_matricul),_useState4=_slicedToArray(_useState3,2),userMatricul=_useState4[0],setMatricul=_useState4[1];var _useState5=useState('Veuillez marquer votre présence'),_useState6=_slicedToArray(_useState5,2),accMsg=_useState6[0],setAccMsg=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),err=_useState8[0],setErr=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),latitude=_useState10[0],setLatitude=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),longitude=_useState12[0],setLongitude=_useState12[1];var validerPresence=function validerPresence(){setLoading(true);setAccMsg('Présence marquée');fetch(\"https://gesperform.online/public/api/getTimeStamp\",{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({num_matricul:userMatricul})}).then(function(response){return response.json();}).then(function(data){console.log(data);if(data.statut==='ok'){window.location.replace('./acceuilemployee');setAccMsg('');}});};var verifierLocalisation=function verifierLocalisation(distance){if(distance<100){console.log('ok');validerPresence();}else{console.log('come to office');setErr('Rendez vous dans nos bureaux');//setAccMsg('Veuillez vous rendre au bureau !');\nsetAccMsg('');}console.log(distance);};var Calcdistance=function Calcdistance(lat1,lon1,lat2,lon2){var R=6371000;var x=(lon2-lon1)*Math.cos((lat1+lat2)/2);var y=lat2-lat1;var d=Math.sqrt(x*x+y*y)*R;return d;};useEffect(function(){if('geolocation'in navigator){navigator.geolocation.getCurrentPosition(function(position){// Obtenir les coordonnées de latitude et longitude\nvar _position$coords=position.coords,latitude=_position$coords.latitude,longitude=_position$coords.longitude;setLatitude(latitude);setLongitude(longitude);//console.log(position.coords);\nverifierLocalisation(Calcdistance(/* longitude, latitude , */6.43212,2.35092,6.43212,2.35092));},function(error){console.log('Erreur de géolocalisation :',error);});}else{console.log('La géolocalisation n\\'est pas disponible dans ce navigateur.');}//autre fonction******************************************************************\nsetTimeout(function(){setLoading(false);},2800);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"contain_confirmation\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"contain_header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"contain_nav_confirm\",children:/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',color:'black'},to:\"/acceuilemployee\",className:\"retour\",children:\"Retour\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"contain_img_confirm\",children:/*#__PURE__*/_jsx(\"img\",{src:Logo_one,className:\"img_confirm\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"contain_my_second_part\",children:loading?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(\"h4\",{className:\"\",children:[accMsg,err]})})})]});}","map":{"version":3,"names":["React","useEffect","useState","Logo_one","Link","Spinner","jsx","_jsx","jsxs","_jsxs","ConfirmerPresence","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","JSON","parse","localStorage","getItem","num_matricul","_useState4","userMatricul","setMatricul","_useState5","_useState6","accMsg","setAccMsg","_useState7","_useState8","err","setErr","_useState9","_useState10","latitude","setLatitude","_useState11","_useState12","longitude","setLongitude","validerPresence","fetch","method","headers","body","stringify","then","response","json","data","console","log","statut","window","location","replace","verifierLocalisation","distance","Calcdistance","lat1","lon1","lat2","lon2","R","x","Math","cos","y","d","sqrt","navigator","geolocation","getCurrentPosition","position","_position$coords","coords","error","setTimeout","className","children","style","textDecoration","color","to","src"],"sources":["D:/GesPerform/frontend/src/Components/ConfirmerPresence.js"],"sourcesContent":["import React , {useEffect, useState} from 'react'\nimport Logo_one from '../img/timetable.png'\nimport { Link } from 'react-router-dom'\nimport '../CSS/confirmation.css'\nimport Spinner from './Spinner'\n\n\n\nexport default function ConfirmerPresence() {\n  let [loading, setLoading] = useState(false);\n  const [userMatricul , setMatricul] = useState(JSON.parse(localStorage.getItem('employee_detail')).num_matricul)\n  const [accMsg , setAccMsg] = useState('Veuillez marquer votre présence')\n\n  const [err , setErr] = useState(null)\n  const [latitude, setLatitude] = useState(null);\n  const [longitude, setLongitude] = useState(null);\n\n  const validerPresence = ()=>{\n    setLoading(true) ; \n    setAccMsg('Présence marquée')\n    fetch(`https://gesperform.online/public/api/getTimeStamp`, {\n      method: 'POST',\n      headers: {\n        'Accept':'application/json',\n        'Content-Type':'application/json'\n      },\n      body:JSON.stringify({\n        num_matricul: userMatricul , \n      }) \n     \n    })\n    .then(response => response.json())\n    .then((data) =>{\n      console.log(data)\n      if(data.statut === 'ok'){\n        window.location.replace('./acceuilemployee')\n        setAccMsg('')\n      }\n    })\n    \n  }\n\n  const verifierLocalisation = (distance)=>{\n    if (distance < 100){\n      console.log('ok')\n      validerPresence();\n    }else{\n      console.log('come to office');\n      setErr('Rendez vous dans nos bureaux')\n      //setAccMsg('Veuillez vous rendre au bureau !');\n      setAccMsg('')\n    }\n   console.log(distance)\n  }\n\n  const Calcdistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371000;\n    const x = (lon2-lon1) * Math.cos((lat1+lat2)/2);\n    const y = (lat2-lat1);\n    const d = Math.sqrt(x*x + y*y) * R;\n    return d;\n  }\n\n\n  useEffect(()=>{\n   \n   \n\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          // Obtenir les coordonnées de latitude et longitude\n          const { latitude, longitude } = position.coords;\n          setLatitude(latitude);\n          setLongitude(longitude);\n\n          //console.log(position.coords);\n          verifierLocalisation(Calcdistance(/* longitude, latitude , */6.43212, 2.35092 ,  6.43212, 2.35092));\n  \n        },\n        (error) => {\n          console.log('Erreur de géolocalisation :', error);\n        }\n      );\n\n    } else {\n      console.log('La géolocalisation n\\'est pas disponible dans ce navigateur.');\n    }\n\n//autre fonction******************************************************************\n    setTimeout(()=>{\n      setLoading(false)\n    } , 2800)\n  }, [])\n\n\n  return (\n    <div className='contain_confirmation'>\n       \n        <div className='contain_header'>\n            <div className='contain_nav_confirm'>\n                \n              <Link style={{textDecoration:'none' , color:'black'}}  to='/acceuilemployee' className='retour' >\n                  Retour\n              </Link>\n        \n            </div>  \n\n            <div className='contain_img_confirm'>\n               <img  src={Logo_one} className='img_confirm'/>\n            </div>  \n        </div>\n\n\n        <div className='contain_my_second_part'>\n          {\n            loading?  \n            <Spinner\n          \n            />\n            :\n            <div className='' >\n                <h4 className=''>\n                  {accMsg}\n                  {err}\n                </h4>\n            </div>\n\n         }\n        </div>\n\n        \n\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}